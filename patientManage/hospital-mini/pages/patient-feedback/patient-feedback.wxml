<view class="container">
  <!-- åé¦ˆè¡¨å• -->
  <view class="feedback-form">
    <view class="form-header">
      <text class="form-title">èº«ä½“åé¦ˆ</text>
      <text class="form-subtitle">è¯·è¯¦ç»†æè¿°æ‚¨å½“å‰çš„èº«ä½“çŠ¶å†µ</text>
    </view>

    <view class="form-item">
      <text class="form-label">èº«ä½“çŠ¶å†µ</text>
      <textarea class="form-textarea" placeholder="è¯·æè¿°æ‚¨å½“å‰çš„èº«ä½“çŠ¶å†µï¼ŒåŒ…æ‹¬ç—‡çŠ¶ã€æ„Ÿå—ç­‰..." bindinput="onContentInput" value="{{content}}" maxlength="500"></textarea>
      <text class="form-counter">{{content.length}}/500</text>
    </view>

    <view class="form-item">
      <text class="form-label">ç—‡çŠ¶ç±»å‹</text>
      <view class="symptom-tags">
        <view class="symptom-tag {{selectedSymptoms.includes('pain') ? 'active' : ''}}" bindtap="onSymptomSelect" data-symptom="pain">
          ç–¼ç—›
        </view>
        <view class="symptom-tag {{selectedSymptoms.includes('fever') ? 'active' : ''}}" bindtap="onSymptomSelect" data-symptom="fever">
          å‘çƒ­
        </view>
        <view class="symptom-tag {{selectedSymptoms.includes('nausea') ? 'active' : ''}}" bindtap="onSymptomSelect" data-symptom="nausea">
          æ¶å¿ƒ
        </view>
        <view class="symptom-tag {{selectedSymptoms.includes('fatigue') ? 'active' : ''}}" bindtap="onSymptomSelect" data-symptom="fatigue">
          ç–²åŠ³
        </view>
        <view class="symptom-tag {{selectedSymptoms.includes('sleep') ? 'active' : ''}}" bindtap="onSymptomSelect" data-symptom="sleep">
          ç¡çœ 
        </view>
        <view class="symptom-tag {{selectedSymptoms.includes('appetite') ? 'active' : ''}}" bindtap="onSymptomSelect" data-symptom="appetite">
          é£Ÿæ¬²
        </view>
      </view>
    </view>

    <view class="form-item">
      <text class="form-label">ç´§æ€¥ç¨‹åº¦</text>
      <view class="urgency-selector">
        <view class="urgency-option {{urgency === 1 ? 'active' : ''}}" bindtap="onUrgencySelect" data-urgency="low">
          <text class="urgency-icon">ğŸŸ¢</text>
          <text class="urgency-text">è½»å¾®</text>
        </view>
        <view class="urgency-option {{urgency === 2 ? 'active' : ''}}" bindtap="onUrgencySelect" data-urgency="medium">
          <text class="urgency-icon">ğŸŸ¡</text>
          <text class="urgency-text">ä¸€èˆ¬</text>
        </view>
        <view class="urgency-option {{urgency === 3 ? 'active' : ''}}" bindtap="onUrgencySelect" data-urgency="high">
          <text class="urgency-icon">ğŸ”´</text>
          <text class="urgency-text">ç´§æ€¥</text>
        </view>
      </view>
    </view>

    <view class="form-item">
      <text class="form-label">è”ç³»æ–¹å¼</text>
      <input class="form-input" placeholder="è¯·è¾“å…¥æ‚¨çš„è”ç³»ç”µè¯" bindinput="onPhoneInput" value="{{phone}}" />
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="submit-section">
    <button class="submit-btn" bindtap="onSubmit" disabled="{{!canSubmit}}">
      æäº¤åé¦ˆ
    </button>
  </view>

  <!-- å†å²åé¦ˆ -->
  <view class="history-section">
    <view class="section-header">
      <text class="section-title">å†å²åé¦ˆ</text>
    </view>
    <view class="feedback-list">
      <view class="feedback-item" wx:for="{{feedbackHistory}}" wx:key="id">
        <view class="feedback-content">
          <text class="feedback-text">{{item.content}}</text>
          <view class="feedback-meta">
            <text class="feedback-time">{{item.time}}</text>
            <text class="feedback-status {{item.status === 'replied' ? 'replied' : ''}}">
              {{item.status === 'replied' ? 'å·²å›å¤' : 'å¾…å›å¤'}}
            </text>
          </view>
        </view>
        <view class="feedback-reply" wx:if="{{item.reply}}">
          <text class="reply-label">æŠ¤å£«å›å¤:</text>
          <text class="reply-text">{{item.reply}}</text>
        </view>
      </view>
    </view>
  </view>
</view> 